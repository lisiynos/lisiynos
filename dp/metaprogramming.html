<html>
<head>
    <meta http-equiv=Content-Type content="text/html; charset=utf-8">
    <title>Метапрограммирование</title>
    <link rel="stylesheet" type="text/css" href="../style/style.css">
</head>
<body>
<div id="content">
    <h1>Метапрограммирование</h1>

    <p><strong>Метапрограммирование</strong>&nbsp;- вид&nbsp;программирования, связанный с созданием&nbsp;программ,
        которые порождают другие программы как результат своей работы&nbsp;(в частности, на стадии&nbsp;компиляции&nbsp;их&nbsp;исходного
        кода), либо программ, которые меняют себя во время выполнения (самомодифицирующийся код).&nbsp;Первое позволяет
        получать программы при меньших затратах времени и усилий на кодирование, чем если бы программист писал их
        вручную целиком, второе позволяет улучшить свойства кода (размер и быстродействие).</p>

    <p><strong>Генерация кода</strong></p>

    <p>При этом подходе код программы не пишется вручную, а создается автоматически программой-генератором на основе
        другой, более простой программы.</p>

    <p> Такой подход приобретает смысл, если при программировании вырабатываются различные дополнительные правила (более
        высокоуровневые&nbsp;<a
                href="http://ru.wikipedia.org/wiki/%D0%9F%D0%B0%D1%80%D0%B0%D0%B4%D0%B8%D0%B3%D0%BC%D0%B0_%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D1%8F"
                title="Парадигма программирования">парадигмы</a>, выполнение требований внешних библиотек, стереотипные
        методы реализации определенных функций и пр.). При этом часть кода теряет содержательный смысл и становится лишь
        механическим выполнением правил. Когда эта часть становится значительной, возникает мысль задавать вручную лишь
        содержательную часть, а остальное добавлять автоматически. Это и проделывает генератор.</p>

    <p><strong>Реализуется двумя основными методами:</strong></p>

    <p><strong>1 - Шаблоны</strong> (наиболее известные случаи применения&nbsp;—&nbsp;<a
            href="http://ru.wikipedia.org/wiki/%D0%9F%D1%80%D0%B5%D0%BF%D1%80%D0%BE%D1%86%D0%B5%D1%81%D1%81%D0%BE%D1%80"
            title="Препроцессор">препроцессор</a>&nbsp;<a
            href="http://ru.wikipedia.org/wiki/%D0%A1%D0%B8_(%D1%8F%D0%B7%D1%8B%D0%BA_%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D1%8F)"
            title="Си (язык программирования)">Си</a>&nbsp;и&nbsp;<a
            href="http://ru.wikipedia.org/wiki/%D0%A8%D0%B0%D0%B1%D0%BB%D0%BE%D0%BD%D1%8B_C%2B%2B" title="Шаблоны C++">шаблоны
        в C++</a>)</p>

    <p>Решают задачу, если соблюдение «правил» сводится к вставке в программу повторяющихся (или почти повторяющихся)
        кусков кода. Помимо этого, обладают ещё рядом достоинств: например, помогают&nbsp;<a
                href="http://ru.wikipedia.org/wiki/%D0%9F%D0%BE%D0%B2%D1%82%D0%BE%D1%80%D0%BD%D0%BE%D0%B5_%D0%B8%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5"
                title="Повторное использование">повторному использованию</a>. См. также:<a
                href="http://ru.wikipedia.org/wiki/%D0%9F%D0%BE%D0%BB%D0%B8%D0%BC%D0%BE%D1%80%D1%84%D0%B8%D0%B7%D0%BC_(%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5)"
                title="Полиморфизм (программирование)">полиморфизм</a></p>

    <p><strong>2 - Внеязыковые средства</strong> (пример: генераторы&nbsp;<a
            href="http://ru.wikipedia.org/wiki/%D0%A1%D0%B8%D0%BD%D1%82%D0%B0%D0%BA%D1%81%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B8%D0%B9_%D0%B0%D0%BD%D0%B0%D0%BB%D0%B8%D0%B7"
            title="Синтаксический анализ">синтаксических</a>&nbsp;и&nbsp;<a
            href="http://ru.wikipedia.org/wiki/%D0%9B%D0%B5%D0%BA%D1%81%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B8%D0%B9_%D0%B0%D0%BD%D0%B0%D0%BB%D0%B8%D0%B7"
            title="Лексический анализ">лексических анализаторов</a>&nbsp;<a href="http://ru.wikipedia.org/wiki/Lex"
                                                                            title="Lex">lex</a>,&nbsp;<a
            href="http://ru.wikipedia.org/wiki/Yacc" title="Yacc">yacc</a>,&nbsp;<a
            href="http://ru.wikipedia.org/wiki/GNU_bison" title="GNU bison">bison</a>)</p>

    <p>Применяются в случаях, если простых средств вроде шаблонов недостаточно. Язык генератора составляется так, чтобы
        автоматически или с минимальными усилиями со стороны программиста реализовывать правила парадигмы или
        необходимые специальные функции. Фактически, это&nbsp;— более высокоуровневый язык программирования, а генератор&nbsp;—
        не что иное, как<a
                href="http://ru.wikipedia.org/wiki/%D0%A2%D1%80%D0%B0%D0%BD%D1%81%D0%BB%D1%8F%D1%82%D0%BE%D1%80"
                title="Транслятор">транслятор</a>. Генераторы пишутся, как правило, для создания специализированных
        программ, в которых очень значительная часть стереотипна, либо для реализации сложных парадигм. </p>
    <ul>
        <li>В&nbsp;<a href="http://ru.wikipedia.org/wiki/Perl" title="Perl">Perl</a>&nbsp;существует понятие «source
            filters» («фильтров исходного кода»)&nbsp;— метода переработки файлов с исходным кодом перед выполнением,
            позволяющего полностью менять синтаксис и семантику языка. Одним из известных примеров является модуль&nbsp;<a
                    href="http://ru.wikipedia.org/w/index.php?title=Lingua::Romana::Perligata&action=edit&redlink=1"
                    title="Lingua::Romana::Perligata (страница отсутствует)">Lingua::Romana::Perligata</a>, позволяющий
            писать код Perl на&nbsp;<a href="http://ru.wikipedia.org/wiki/%D0%9B%D0%B0%D1%82%D1%8B%D0%BD%D1%8C"
                                       title="Латынь">латыни</a>.
        </li>
        <li>В&nbsp;<a
                href="http://ru.wikipedia.org/wiki/%D0%A4%D0%BE%D1%80%D1%82_(%D1%8F%D0%B7%D1%8B%D0%BA_%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D1%8F)"
                title="Форт (язык программирования)">Форт</a>&nbsp;программисту предоставляют встроенные в язык
            возможности по изменению своего синтаксиса и семантики. Это достигается определением архитектуры виртуальной
            машины и полного доступа к возможностям изменения её составляющих.
        </li>
    </ul>
    <div>
        <p><strong> </strong><a
                href="http://ru.wikipedia.org/wiki/%D0%A1%D0%B0%D0%BC%D0%BE%D0%BC%D0%BE%D0%B4%D0%B8%D1%84%D0%B8%D1%86%D0%B8%D1%80%D1%83%D1%8E%D1%89%D0%B8%D0%B9%D1%81%D1%8F_%D0%BA%D0%BE%D0%B4"
                title="Самомодифицирующийся код"><strong>Самомодифицирующийся код</strong></a><strong> </strong></p>
    </div>
    <p>Возможность изменять или дополнять себя во время выполнения превращает программу в&nbsp;<a
            href="http://ru.wikipedia.org/wiki/%D0%92%D0%B8%D1%80%D1%82%D1%83%D0%B0%D0%BB%D1%8C%D0%BD%D0%B0%D1%8F_%D0%BC%D0%B0%D1%88%D0%B8%D0%BD%D0%B0"
            title="Виртуальная машина">виртуальную машину</a> Хотя такая возможность существовала уже давно на уровне
        машинных кодов (и активно использовалась, например, при создании&nbsp;<a
                href="http://ru.wikipedia.org/wiki/%D0%9F%D0%BE%D0%BB%D0%B8%D0%BC%D0%BE%D1%80%D1%84%D0%BD%D1%8B%D0%B9_%D0%B2%D0%B8%D1%80%D1%83%D1%81"
                title="Полиморфный вирус">полиморфных вирусов</a>), с метапрограммированием обычно связывают перенос
        подобных технологий в высокоуровневые языки.</p>

    <p> Основные методы реализации:</p>
    <ul>
        <li>
            <a href="http://ru.wikipedia.org/wiki/%D0%98%D0%BD%D1%82%D1%80%D0%BE%D1%81%D0%BF%D0%B5%D0%BA%D1%86%D0%B8%D1%8F_(%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5)"
               title="Интроспекция (программирование)">Интроспекция</a>&nbsp;— представление внутренних структур языка в
            виде переменных встроенных типов с возможностью доступа к ним из программы.
        </li>
    </ul>
    <p>Позволяет во время выполнения просматривать, создавать и изменять определения типов,&nbsp;<a
            href="http://ru.wikipedia.org/wiki/%D0%A1%D1%82%D0%B5%D0%BA_%D0%B2%D1%8B%D0%B7%D0%BE%D0%B2%D0%BE%D0%B2"
            title="Стек вызовов">стек вызовов</a>, обращаться к переменной по имени, получаемому динамически и пр.</p>
    <ul>
        <li>Пространство имён&nbsp;System.Reflection&nbsp;и тип&nbsp;System.Type&nbsp;в&nbsp;<a
                href="http://ru.wikipedia.org/wiki/.NET_Framework" title=".NET Framework">.NET</a>; классы&nbsp;Class,
            Method, Field&nbsp;в&nbsp;<a href="http://ru.wikipedia.org/wiki/Java" title="Java">Java</a>; представление
            пространств имен и определений типов через встроенные типы данных в&nbsp;<a
                    href="http://ru.wikipedia.org/wiki/Python" title="Python">Python</a>; стандартные встроенные
            возможности в&nbsp;<a
                    href="http://ru.wikipedia.org/wiki/%D0%A4%D0%BE%D1%80%D1%82_(%D1%8F%D0%B7%D1%8B%D0%BA_%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D1%8F)"
                    title="Форт (язык программирования)">Форт</a>&nbsp;по доступу к ресурсам виртуальной машины;
            получение значения и изменение свойств почти любого из объектов в&nbsp;<a
                    href="http://ru.wikipedia.org/wiki/ECMAScript" title="ECMAScript">ECMAScript</a>&nbsp;(с
            оговорками).
        </li>
        <li>Интерпретация произвольного кода, представленного в виде строки.</li>
        <ul>
            <li>Существует естественным образом во множестве интерпретируемых языков, например, eval() в&nbsp;<a
                    href="http://ru.wikipedia.org/wiki/PHP" title="PHP">PHP</a>.
            </li>
            <li>Компилятор&nbsp;<a href="http://ru.wikipedia.org/wiki/Tiny_C_Compiler" title="Tiny C Compiler">Tiny
                C</a>&nbsp;позволяет «на лету» компилировать и исполнять код на языке C, представленный в виде
                строки символов.
            </li>
            <li>Для Форт использования процедуры интерпретации из строки EVALUATE.</li>
        </ul>
    </ul>
    <p>В языке&nbsp;<a
            href="http://ru.wikipedia.org/wiki/%D0%9F%D1%80%D0%BE%D0%BB%D0%BE%D0%B3_(%D1%8F%D0%B7%D1%8B%D0%BA_%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D1%8F)"
            title="Пролог (язык программирования)">Пролог</a>&nbsp;метапрограммирование позволяет автоматизировать
        разработку и&nbsp;<a
                href="http://ru.wikipedia.org/wiki/%D0%A4%D0%BE%D1%80%D0%BC%D0%B0%D0%BB%D1%8C%D0%BD%D0%B0%D1%8F_%D0%B2%D0%B5%D1%80%D0%B8%D1%84%D0%B8%D0%BA%D0%B0%D1%86%D0%B8%D1%8F"
                title="Формальная верификация">верификацию</a>&nbsp;(проверку свойств) Пролог-программ. Метапрограммы
        рассматривают программы на Прологе как термы и позволяют анализировать их свойства и взаимоотношения, строить
        программы для управления другими Пролог-программами.</p>
</div>
</body>
</html>
